{"version":3,"sources":["components/add-person.js","components/filter-people.js","components/person.js","components/numbers.js","services/phonebook.js","components/notifier.js","index.js"],"names":["AddPerson","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","FilterPeople","filter","handleFilterChange","Person","person","deletePerson","name","number","onClick","Numbers","people","map","key","db_url","axios","get","then","response","data","newObject","post","id","delete","newObj","put","Notification","msg","error","className","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","setMsg","setError","useEffect","Phonebook","catch","notification","peopleToShow","toLowerCase","includes","message","isError","setTimeout","event","preventDefault","names","numbers","window","confirm","newPerson","find","p","toLocaleLowerCase","returnedPerson","initialContacts","length","concat","target","returnData","console","log","updatedPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e7af4024.chunk.js","sourcesContent":["import React from 'react';\n\nconst AddPerson = ({\n    addPerson,\n    newName,\n    handleNameChange,\n    newNumber,\n    handleNumberChange\n}) => (\n    <>\n        <h3>Add new person</h3>\n        <form onSubmit = {addPerson}>\n            <table>\n                <tbody>\n                    <tr>\n                        <td>name:</td>\n                        <td>\n                            <input value = {newName}\n                                onChange = {handleNameChange}/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>number:</td>\n                        <td> \n                            <input value = {newNumber} \n                                onChange = {handleNumberChange}/>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    </>\n);\n\nexport default AddPerson;","import React from 'react';\n\nconst FilterPeople = ({\n    filter,\n    handleFilterChange\n}) =>(\n    <>\n        <h3>Filter people by name</h3>\n        <form>\n            <div>\n        name: <input value = {filter}\n                    onChange = {handleFilterChange}/>\n            </div>\n        </form>\n    </>\n);\n\nexport default FilterPeople;","import React from 'react';\n\nconst Person = ({person, deletePerson}) =>(\n    <tr >\n        <td>{person.name}</td>\n        <td>{person.number}</td>\n        <td><button onClick = {() => deletePerson(person)}>delete</button></td>\n    </tr>\n);\n\nexport default Person;","import React from 'react';\nimport Person from './person';\n\nconst Numbers = ({people, deletePerson}) => (\n    <>\n        <h2>Numbers</h2>\n        <table>\n            <tbody>\n                {people.map((person) =>\n                    <Person key = {person.name} person = {person} deletePerson = {deletePerson}/>\n                )}\n            </tbody>\n        </table>\n    </>\n);\n\nexport default Numbers;","import axios from 'axios';\n\nconst db_url = 'http://localhost:3001/api/persons';\n\nconst getAll = () => {\n    const request = axios.get(db_url);\n    return request.then(response => response.data);\n};\n\nconst postNew = newObject => {\n    const request = axios.post(db_url, newObject);\n    return request.then(response => response.data);\n};\n\nconst deletePerson = id => {\n    const request = axios.delete(`${db_url}/${id}`);\n    return request.then(response => response.data);\n};\n\nconst updateContact = newObj => {\n    const request = axios.put(`${db_url}/${newObj.id}`, newObj);\n    return request.then(response => response.data);\n};\n\nexport default {getAll, postNew, deletePerson, updateContact};","import React from 'react';\nimport './notifier.css';\n\nconst Notification = ({msg, error}) => {\n    \n    if(error) {\n        return (\n            <div className='error'>\n                <p>{msg}</p>\n            </div>\n        );\n    }\n\n    else {\n        return (\n            <div className='success'>\n                <p>{msg}</p>\n            </div>\n        );\n    }\n};\n\nexport default Notification;","import React, {useEffect, useState} from 'react';\nimport ReactDOM from 'react-dom';\nimport AddPerson from './components/add-person';\nimport FilterPeople from './components/filter-people';\nimport Numbers from './components/numbers';\nimport Phonebook from './services/phonebook';\nimport Notification from './components/notifier';\n\n\nconst App = () =>{\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const [filter, setNewFilter] = useState('');\n    const [msg, setMsg] = useState(null);\n    const [error, setError] = useState();\n\n    useEffect(() => {\n        Phonebook.getAll()\n            .then(setPersons)\n            .catch(error => {\n                notification(`Failed to fetch phonebook. ${error}`, true);\n            });\n            \n    }, [setPersons, setMsg, setError]);\n\n    const handleNameChange = (event) =>{\n        setNewName(event.target.value);\n    };\n\n    const handleNumberChange = (event) =>{\n        setNewNumber(event.target.value);\n    };\n\n    const handleFilterChange = (event) =>{\n        setNewFilter(event.target.value);\n    }; \n\n    const peopleToShow = persons.filter(person =>\n        person.name.toLowerCase().includes(filter.toLowerCase()));\n        \n    const notification = (message, isError) => {\n        isError ? setError(true) : setError(false);\n        setMsg(message);\n        setTimeout(() => {\n            setMsg(null);\n        }, 3000);\n    };    \n\n    const addPerson = (event) =>{\n        event.preventDefault();\n        const names = persons.map(person => (person.name.toLowerCase()));\n        const numbers = persons.map(person => (person.number));\n\n        if(names.includes(newName.toLowerCase())){\n\n            if(window.confirm(`${newName} is already added to phonebook, replace the old number?`)) {\n                const newPerson = {\n                    name: newName,\n                    number: newNumber,\n                    id: persons.find(p => p.name.toLowerCase() === newName.toLocaleLowerCase()).id\n                };\n        \n                Phonebook.updateContact(newPerson)\n                    .then(returnedPerson => {\n                        Phonebook.getAll()\n                            .then(initialContacts => {\n                                setPersons(initialContacts);\n                            });\n                        notification(`Updated ${newPerson.name}`, false);\n                    })\n                    .catch(error => {\n                        notification(`Could not update contact. ${error}`, true);\n                    });\n            }\n\n            else{\n                setNewName('');\n                setNewNumber('');\n            }\n        }\n\n        else if(numbers.includes(newNumber)){\n            notification(`${newNumber} is already added to phonebook!`, true);\n        }\n\n        else if(newName !== '' && newNumber !== ''){\n            const newPerson = {\n                name: newName,\n                number: newNumber,\n                id: persons[persons.length - 1].id + 1\n            };\n        \n            Phonebook.postNew(newPerson)\n                .then(returnedPerson => {\n                    setPersons(persons.concat(newPerson));\n                    setNewName('');\n                    setNewNumber('');\n                    notification(`Added ${newPerson.name}`, false);\n                })\n                .catch(error => {\n                    notification(`Could not add person to database. ${error}`, true);\n                });\n        }\n    };\n\n    const deletePerson = (person) => {\n\n        if(!window.confirm(`Delete ${person.name}?`)){return;}\n\n        Phonebook.deletePerson(person.id)\n            .then(returnData => {\n                console.log(returnData);\n\n                const updatedPersons = persons.filter(p => (\n                    p.id !== person.id\n                ));\n\n                setPersons(updatedPersons);\n                notification(`Deleted ${person.name}`, false);\n            })\n            .catch(error => {\n                notification(`Could not delete ${person.name}. ${error}`, true);\n            });\n    };\n  \n    return(\n        <div>\n            <h2>Phonebook</h2>\n            <AddPerson\n                addPerson = {addPerson}\n                newName = {newName}\n                handleNameChange = {handleNameChange}\n                newNumber = {newNumber}\n                handleNumberChange = {handleNumberChange}/>\n            {msg !== null && <Notification msg = {msg} error = {error}/>}\n            <FilterPeople\n                filter = {filter}\n                handleFilterChange = {handleFilterChange}/>\n            <Numbers \n                people = {peopleToShow}\n                deletePerson = {deletePerson}/>\n        </div>\n    );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}